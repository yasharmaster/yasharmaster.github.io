<!DOCTYPE html>
<html>
    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    

    <title>Project Report - Google Summer of Code 2017</title>
    <meta name="description" content="GSoC 2017 Report">

    <link rel="stylesheet" href="/css/main.css">
    <link rel="canonical" href="http://yasharmaster.github.io/blog/2017/gsoc-2017-final-report/">
    <link rel="alternate" type="application/rss+xml" title="Yash Sharma" href="http://yasharmaster.github.io/feed.xml" />
    <script src="http://fast.eager.io/ehZJ0e6K5k.js"></script>
  </head>

  <!-- Begin Jekyll SEO tag v2.0.0 -->
<title>Project Report - Google Summer of Code 2017 - Yash Sharma</title>
<meta property="og:title" content="Project Report - Google Summer of Code 2017" />
<meta name="description" content="GSoC 2017 Report" />
<meta property="og:description" content="GSoC 2017 Report" />
<link rel="canonical" href="http://yasharmaster.github.io/blog/2017/gsoc-2017-final-report/" />
<meta property="og:url" content="http://yasharmaster.github.io/blog/2017/gsoc-2017-final-report/" />
<meta property="og:site_name" content="Yash Sharma" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-08-29T13:30:00+05:30" />
<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "Project Report - Google Summer of Code 2017",
    "datePublished": "2017-08-29T13:30:00+05:30",
    "description": "GSoC 2017 Report",
    "url": "http://yasharmaster.github.io/blog/2017/gsoc-2017-final-report/"
  }
</script>
<!-- End Jekyll SEO tag -->
  <body>
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>

    <main>
      <header class="site-header">
  <div class="container">
    <h1><a href="/">Yash <span>Sharma</span></a></h1>

    <button type="button" class="sliding-panel-button">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <nav class="navbar sliding-panel-content">
      <ul>
        
          <li><a href="/about" title="About">About</a></li>
        
          <li><a href="/resume" title="Resume">Resume</a></li>
        
          <li><a href="/blog" title="Blog">Blog</a></li>
        
        <li><a href="/feed.xml" target="_blank"><i class="icon icon-feed"></i></a></li>
      </ul>
    </nav>
  </div>
</header>

<div class="sliding-panel-fade-screen"></div>


      <div class="container">
        <article role="article" class="post">

  <div class="card">
    <header class="post-header">
      <h1 class="post-title">Project Report - Google Summer of Code 2017</h1>
      <p class="post-meta">Aug 29, 2017</p>
    </header>

    <div class="post-content">
      <h1 id="gsoc-2017-report">GSoC 2017 Report</h1>

<p>In this post I am sharing with you the <a href="https://gist.github.com/yasharmaster/cfa18e7bac00d7ed0a93d74f4946efc7">Project Report</a> that I have submitted as the work product for Google Summer of Code 2017. It summarizes all the blog posts written by me during this summer.</p>

<ul>
  <li><strong>Organisation</strong> - InterMine
    <ul>
      <li>Github / <a href="https://github.com/intermine">@intermine</a></li>
      <li>Website / <a href="http://intermine.org/">InterMine.org</a></li>
    </ul>
  </li>
  <li><strong>Project</strong>: Prototype a RESTful API Querying Neo4j Database</li>
  <li><strong>Mentors</strong>:
    <ul>
      <li>Sam / <a href="https://github.com/sammyjava">@sammyjava</a></li>
      <li>Daniela / <a href="https://github.com/danielabutano">@danielabutano</a></li>
      <li>Vivek / <a href="https://github.com/vivekkrish">@vivekkrish</a></li>
    </ul>
  </li>
  <li><strong>Student</strong>: Yash Sharma / <a href="https://github.com/yasharmaster">@yasharmaster</a></li>
</ul>

<h2 id="table-of-contents">Table of contents</h2>

<ul>
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#quick-links">Quick links</a></li>
  <li><a href="#how-to-use-the-code">How to use the code</a></li>
  <li><a href="#metadata-in-neo4j">Metadata in Neo4j</a></li>
  <li><a href="#pathquery-to-cypher">PathQuery to Cypher</a></li>
  <li><a href="#restful-api">RESTful API</a></li>
  <li><a href="#conclusion">Conclusion</a></li>
</ul>

<h2 id="introduction">Introduction</h2>

<p>This document is for the purpose of review and for those interested to gain
understanding about the work that I did for InterMine as a GSoC 2017 student developer. In this project we developed a prototype of InterMine which uses Neo4j database. The rest of the report describes the various tasks done during the summer.</p>

<h2 id="quick-links">Quick Links</h2>

<ul>
  <li><a href="https://github.com/intermine/neo4j">Project Repo</a></li>
  <li><a href="https://github.com/intermine/neo4j/commits/dev?author=yasharmaster">List of Commits</a></li>
  <li><a href="http://yasharmaster.github.io/blog/">Blogs</a></li>
  <li><a href="https://summerofcode.withgoogle.com/projects/#4633491521142784">GSoC Project Link</a></li>
</ul>

<h2 id="how-to-use-the-code">How to use the code</h2>

<h4 id="test-the-api-via-its-swagger-ui">Test the API via its Swagger UI</h4>
<ul>
  <li>Visit <a href="http://intermine-neo4jwebapp.herokuapp.com/">intermine-neo4jwebapp.herokuapp.com</a> to test the API via its Swagger UI.</li>
</ul>

<h4 id="host-server-locally">Host Server Locally</h4>
<ul>
  <li>Visit the project repo <a href="https://github.com/intermine/neo4j">intermine/neo4j</a>.</li>
  <li>Follow instructions given in <a href="https://github.com/intermine/neo4j/blob/dev/README.md">README.md</a> on how to host the server locally.</li>
</ul>

<h2 id="metadata-in-neo4j">Metadata in Neo4j</h2>

<p><strong>Note</strong> - The metadata related code is in <a href="https://github.com/intermine/neo4j/tree/dev/intermine-neo4j/src/main/java/org/intermine/neo4j/metadata">org.intermine.neo4j.metadata</a> package.</p>

<p>In the present version of InterMine, the data model is stored in an external <a href="https://github.com/intermine/intermine/blob/dev/bio/core/core.xml">XML file</a>. For each entity, its attributes, references and collections are stored in this XML file. For example, a part of the data model file which describes the BioEntity class looks like this.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;class</span> <span class="na">name=</span><span class="s">&quot;BioEntity&quot;</span> <span class="na">is-interface=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;primaryIdentifier&quot;</span> <span class="na">type=</span><span class="s">&quot;java.lang.String&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;attribute</span> <span class="na">name=</span><span class="s">&quot;symbol&quot;</span> <span class="na">type=</span><span class="s">&quot;java.lang.String&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;reference</span> <span class="na">name=</span><span class="s">&quot;organism&quot;</span> <span class="na">referenced-type=</span><span class="s">&quot;Organism&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;collection</span> <span class="na">name=</span><span class="s">&quot;locatedFeatures&quot;</span> <span class="na">referenced-type=</span><span class="s">&quot;Location&quot;</span> <span class="na">reverse-reference=</span><span class="s">&quot;locatedOn&quot;</span><span class="nt">/&gt;</span>
    <span class="nt">&lt;collection</span> <span class="na">name=</span><span class="s">&quot;locations&quot;</span> <span class="na">referenced-type=</span><span class="s">&quot;Location&quot;</span> <span class="na">reverse-reference=</span><span class="s">&quot;feature&quot;</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/class&gt;</span></code></pre></figure>

<p>While developing Neo4j prototype of InterMine, to reduce the dependency on external files, it was decided to store the schema in the Neo4j database itself. Since we can only store Nodes &amp; Directed Relationships in Neo4j, therefore it brought up two issues:</p>

<ul>
  <li>The data model must to be in the form of a graph itself so that it can be stored in the Neo4j database.</li>
  <li>The data model should represent all the existing Nodes in the database and the Relationships among them.</li>
</ul>

<p>Since the data model is a graph and it stores information about the InterMine graph, we call it a metagraph. To create the schema/data-model for the database,</p>

<ol>
  <li>Some sample data is loaded in Neo4j which adheres to the data model.</li>
  <li>As per the Nodes &amp; Relationship of the sample data, metagraph is generated &amp; stored in Neo4j.</li>
  <li>The data model can be retrieved and accessed using the Model class and its methods.</li>
</ol>

<h3 id="metagraph-structure">Metagraph Structure</h3>

<p>Each node in the metagraph is assigned <code>:Metagraph</code> label. All the metagraph nodes are further classified into two types, NodeType and RelType. As the name suggests, each NodeType node represents a specific type of nodes and each RelType node represents a specific type of relationship in the IM graph. So each node has either <code>:NodeType</code> or <code>:RelType</code> label depending on which entity it represents.</p>

<h4 id="nodetype">NodeType</h4>

<p>A metagraph node labelled <code>:NodeType</code> contains following two properties.</p>

<ol>
  <li>
    <p><strong>labels</strong> - A list containing the labels of the nodes that are represented by the <code>:NodeType</code> node. For example, [“Gene”,”SequenceFeature”,”BioEntity”].</p>
  </li>
  <li>
    <p><strong>keys</strong> - A list containing the keys of all the properties exist amongst the nodes that are represented by the <code>:NodeType</code> node. For example, [“primaryIdentifier”, “secondaryIdentifier”, “symbol”].</p>
  </li>
</ol>

<p>Each <code>:NodeType</code> node is uniquely identified by its labels property. So, for all the nodes in the IM graph which are labelled <code>:Gene</code>, <code>:SequenceFeature</code>, <code>:BioEntity</code>, there exists one <code>:NodeType</code> node in the metagraph which has its labels property set as [“Gene”,”SequenceFeature”,”BioEntity”].</p>

<h4 id="reltype">RelType</h4>

<p>A metagraph node labelled <code>:RelType</code> contains following two properties.</p>

<ol>
  <li>
    <p><strong>type</strong> - A string denoting the <code>type</code> of the relationships that are represented by the <code>:RelType</code> node. For example, “HOMOLOGUE_OF”.</p>
  </li>
  <li>
    <p><strong>keys</strong> - A list containing the keys of all the properties exist amongst the relationships that are represented by the <code>:RelType</code> node. For example, [“DataSet”].</p>
  </li>
</ol>

<p>Each <code>:RelType</code> node is uniquely identified by its type property. So, for all the relationships of type HOMOLOGUE_OF in the IM graph, there exists one <code>:RelType</code> node in the metagraph which has its type property set as “HOMOLOGUE_OF”.</p>

<h4 id="relationships-in-metagraph">Relationships in MetaGraph</h4>

<p>Metagraph should not only contain information about the properties of various entities in the IM graph but it should also store how different types of nodes are connected to each other. To represent this information, we make use of Neo4j relationships.</p>

<p>We know that each <code>:RelType</code> node represents a type of relationships that exist in the IM graph. Now, we create two outgoing relationships/edges from each <code>:RelType</code> node - <code>:StartNodeType</code> and <code>:EndNodeType</code>. These edges end on a <code>:NodeType</code> node.</p>

<p>Thus the metagraph path <code>(a:RelType)-[:StartNodeType]-&gt;(b:NodeType)</code> shows that the relationships represented by node <code>a</code> starts from the nodes represented by the node <code>b</code>. Same case follows for <code>:EndNodeType</code>.</p>

<p><img src="http://yasharmaster.github.io/images/metagraph.jpg" alt="Metagraph" /></p>

<h2 id="pathquery-to-cypher">PathQuery to Cypher</h2>

<p><strong>Note</strong> - The Path Query to Cypher conversion code is in <a href="https://github.com/intermine/neo4j/tree/dev/intermine-neo4j/src/main/java/org/intermine/neo4j/cypher">org.intermine.neo4j.cypher</a> package.</p>

<p>The InterMine graph is queried by the user via the API using Path Queries. On the other hand, Neo4j database is queried by Cypher Query Language. Therefore, we needed to convert the Path Query given by the user to Cypher Query. This conversion was the most difficult part of the project. Following is an example Path Query.</p>

<figure class="highlight"><pre><code class="language-xml" data-lang="xml"><span class="nt">&lt;query</span> <span class="na">name=</span><span class="s">&quot;&quot;</span> <span class="na">model=</span><span class="s">&quot;genomic&quot;</span> <span class="na">view=</span><span class="s">&quot;Gene.primaryIdentifier&quot;</span> <span class="na">longDescription=</span><span class="s">&quot;&quot;</span> <span class="na">sortOrder=</span><span class="s">&quot;Gene.primaryIdentifier asc&quot;</span><span class="nt">&gt;</span>
    <span class="nt">&lt;constraint</span> <span class="na">path=</span><span class="s">&quot;Gene.chromosomeLocation&quot;</span> <span class="na">op=</span><span class="s">&quot;DOES NOT OVERLAP&quot;</span><span class="nt">&gt;</span>
        <span class="nt">&lt;value&gt;</span>2L:14615435..14619002
        <span class="nt">&lt;/value&gt;</span>
    <span class="nt">&lt;/constraint&gt;</span>
<span class="nt">&lt;/query&gt;</span></code></pre></figure>

<p>As you can see, various paths make up most of the Path Query. The information represented by paths is
- either returned as views,
- constrained to filter the data or
- used to order the results etc.</p>

<p>After pondering over the paths, I concluded that a <a href="https://en.wikipedia.org/wiki/Tree_(data_structure)">Tree</a> would be the best possible representation of all the paths of the Path Query. So, I created a data structure called a Path Tree and came up with an approach of Path Query to Cypher conversion which makes use of the Path Tree.</p>

<p><img src="http://yasharmaster.github.io/images/PathTree.png" alt="PathTree" /></p>

<p>Roughly, the following approach was used by me to convert Path Query to Cypher.</p>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="mf">1.</span> <span class="n">Take</span> <span class="n">a</span> <span class="n">PathQuery</span> <span class="n">object</span> <span class="n">as</span> <span class="n">input</span><span class="p">.</span>
<span class="mf">2.</span> <span class="n">Retrieve</span> <span class="n">all</span> <span class="n">the</span> <span class="n">Paths</span> <span class="n">from</span> <span class="n">the</span> <span class="n">Views</span><span class="p">,</span> <span class="n">Constraints</span> <span class="o">&amp;</span> <span class="n">Sort</span> <span class="n">Order</span><span class="p">.</span>
<span class="mf">3.</span> <span class="n">Using</span> <span class="n">all</span> <span class="n">the</span> <span class="n">Paths</span> <span class="n">of</span> <span class="n">PathQuery</span><span class="p">,</span> <span class="n">create</span> <span class="n">a</span> <span class="n">PathTree</span> <span class="n">such</span> <span class="n">that</span> 
	<span class="mf">1.</span> <span class="n">Each</span> <span class="n">TreeNode</span> <span class="n">represents</span> <span class="n">a</span> <span class="n">component</span> <span class="n">of</span> <span class="n">the</span> <span class="n">path</span><span class="p">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">the</span> <span class="n">path</span> <span class="s">&quot;Gene.pathways.identifier&quot;</span> <span class="n">forms</span> <span class="n">three</span> <span class="n">TreeNodes</span> <span class="n">i</span><span class="p">.</span><span class="n">e</span><span class="p">.</span> <span class="n">Gene</span><span class="p">,</span> <span class="n">Pathways</span> <span class="o">&amp;</span> <span class="n">Identifier</span><span class="p">.</span>
	<span class="mf">2.</span> <span class="n">Paths</span> <span class="n">with</span> <span class="n">common</span> <span class="n">prefix</span> <span class="n">have</span> <span class="n">the</span> <span class="n">same</span> <span class="n">common</span> <span class="n">ancestor</span><span class="p">.</span>
	<span class="mf">3.</span> <span class="n">Root</span> <span class="n">TreeNode</span> <span class="n">represents</span> <span class="n">a</span> <span class="n">Graph</span> <span class="n">Node</span><span class="p">.</span>
	<span class="mf">4.</span> <span class="n">All</span> <span class="n">Leaves</span> <span class="n">of</span> <span class="n">the</span> <span class="n">PathTree</span> <span class="n">always</span> <span class="n">represent</span> <span class="n">Graph</span> <span class="n">Properties</span><span class="p">.</span>
	<span class="mf">5.</span> <span class="n">All</span> <span class="n">other</span> <span class="n">Internal</span> <span class="n">TreeNodes</span> <span class="n">can</span> <span class="n">represent</span> <span class="n">either</span> <span class="n">Graph</span> <span class="n">Nodes</span> <span class="n">or</span> <span class="n">Graph</span> <span class="n">Relationships</span><span class="p">.</span>
<span class="mf">4.</span> <span class="n">Generate</span> <span class="o">&amp;</span> <span class="n">store</span> <span class="n">a</span> <span class="n">unique</span> <span class="n">variable</span> <span class="n">name</span> <span class="n">to</span> <span class="n">each</span> <span class="n">Internal</span> <span class="n">node</span> <span class="n">of</span> <span class="n">the</span> <span class="n">PathTree</span><span class="p">.</span>
	<span class="mf">1.</span> <span class="n">This</span> <span class="n">variable</span> <span class="n">name</span> <span class="n">will</span> <span class="n">be</span> <span class="n">used</span> <span class="k">for</span> <span class="n">referring</span> <span class="n">that</span> <span class="n">TreeNode</span> <span class="n">in</span> <span class="n">the</span> <span class="n">cypher</span> <span class="n">query</span><span class="p">.</span>
	<span class="mf">2.</span> <span class="n">For</span> <span class="n">generating</span> <span class="n">the</span> <span class="n">variable</span> <span class="n">name</span><span class="p">,</span> <span class="n">we</span> <span class="n">can</span> <span class="n">separate</span> <span class="n">each</span> <span class="n">component</span> <span class="n">of</span> <span class="n">the</span> <span class="n">path</span> <span class="k">using</span> <span class="n">underscores</span><span class="p">.</span> <span class="n">For</span> <span class="n">example</span><span class="p">,</span> <span class="n">the</span> <span class="n">variable</span> <span class="n">name</span> <span class="k">for</span> <span class="s">&quot;Gene.pathways.identifier&quot;</span> <span class="n">will</span> <span class="n">be</span> <span class="n">gene_pathways_identifier</span><span class="p">.</span>
<span class="mf">5.</span> <span class="n">Use</span> <span class="n">the</span> <span class="n">PathTree</span> <span class="o">&amp;</span> <span class="n">PathQuery</span> <span class="n">to</span> <span class="n">generate</span> <span class="n">the</span> <span class="n">cypher</span> <span class="n">query</span>
	<span class="mf">1.</span> <span class="n">For</span> <span class="n">creating</span> <span class="n">the</span> <span class="n">Match</span> <span class="n">Clause</span><span class="p">,</span> <span class="n">starting</span> <span class="n">with</span> <span class="n">the</span> <span class="n">Root</span><span class="p">,</span> <span class="n">recursively</span> <span class="n">match</span> <span class="n">each</span> <span class="n">TreeNode</span> <span class="n">of</span> <span class="n">the</span> <span class="n">PathTree</span><span class="p">,</span>
		<span class="mf">1.</span> <span class="n">If</span> <span class="n">the</span> <span class="n">TreeNode</span> <span class="n">is</span> <span class="n">Root</span><span class="p">,</span> <span class="n">match</span> <span class="n">the</span> <span class="n">node</span> <span class="n">itself</span><span class="p">.</span> <span class="n">e</span><span class="p">.</span><span class="n">g</span><span class="p">.</span> <span class="p">(</span><span class="n">gene</span><span class="p">).</span>
		<span class="mf">2.</span> <span class="n">If</span> <span class="n">current</span> <span class="n">TreeNode</span> <span class="n">is</span> <span class="n">a</span> <span class="n">NODE</span><span class="p">,</span>
			<span class="mf">1.</span> <span class="n">If</span> <span class="n">its</span> <span class="n">parent</span> <span class="n">is</span> <span class="n">also</span> <span class="n">a</span> <span class="n">NODE</span><span class="p">,</span> <span class="n">then</span> <span class="n">fetch</span> <span class="n">the</span> <span class="n">Relationship</span> <span class="n">Type</span> <span class="n">from</span> <span class="n">the</span> <span class="n">XML</span> <span class="n">data</span> <span class="n">model</span> <span class="n">file</span> <span class="n">and</span> <span class="n">create</span> <span class="n">the</span> <span class="n">match</span> <span class="n">as</span> <span class="p">(</span><span class="n">parentNode</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="n">relationshipFromXml</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">currentNode</span><span class="p">).</span>
			<span class="mf">2.</span> <span class="n">If</span> <span class="n">the</span> <span class="n">parent</span> <span class="n">is</span> <span class="n">a</span> <span class="n">RELATIONSHIP</span><span class="p">,</span> <span class="n">then</span> <span class="n">fetch</span> <span class="n">the</span> <span class="n">grand</span> <span class="n">parent</span> <span class="n">from</span> <span class="n">the</span> <span class="n">PathTree</span> <span class="n">and</span> <span class="n">create</span> <span class="n">match</span> <span class="n">as</span> <span class="p">(</span><span class="n">grandParentNode</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="n">parentNode</span><span class="p">]</span><span class="o">-</span><span class="p">(</span><span class="n">currentNode</span><span class="p">).</span>
		<span class="mf">3.</span> <span class="n">If</span> <span class="n">current</span> <span class="n">TreeNode</span> <span class="n">is</span> <span class="n">a</span> <span class="n">RELATIONSHIP</span><span class="p">,</span> 
	        	<span class="mf">1.</span> <span class="n">If</span> <span class="n">current</span> <span class="n">node</span> <span class="n">does</span> <span class="n">not</span> <span class="n">have</span> <span class="n">any</span> <span class="n">children</span><span class="p">,</span> <span class="n">then</span> <span class="n">add</span> <span class="n">match</span> <span class="n">with</span> <span class="n">an</span> <span class="n">empty</span> <span class="n">node</span> <span class="n">as</span> <span class="p">(</span><span class="n">parentNode</span><span class="p">)</span><span class="o">-</span><span class="p">[</span><span class="n">currentNode</span><span class="p">]</span><span class="o">-</span><span class="p">().</span>
	        	<span class="mf">2.</span> <span class="n">If</span> <span class="n">current</span> <span class="n">node</span> <span class="n">has</span> <span class="n">any</span> <span class="n">children</span><span class="p">,</span> <span class="n">then</span> <span class="k">do</span> <span class="n">nothing</span> <span class="p">(</span><span class="n">they</span> <span class="n">will</span> <span class="n">be</span> <span class="n">matched</span> <span class="n">when</span> <span class="n">recursion</span> <span class="n">reaches</span> <span class="n">the</span> <span class="n">children</span><span class="p">).</span>
	<span class="mf">2.</span> <span class="n">For</span> <span class="n">creating</span> <span class="n">the</span> <span class="n">WHERE</span> <span class="n">clause</span><span class="p">,</span>
		<span class="mf">1.</span> <span class="n">For</span> <span class="n">each</span> <span class="n">constraint</span> <span class="n">in</span> <span class="n">the</span> <span class="n">PathQuery</span><span class="p">,</span> <span class="n">generate</span> <span class="n">an</span> <span class="n">equivalent</span> <span class="n">Cypher</span> <span class="n">constraint</span><span class="p">.</span>
		<span class="mf">2.</span> <span class="n">In</span> <span class="n">the</span> <span class="n">constraint</span> <span class="n">logic</span> <span class="n">of</span> <span class="n">the</span> <span class="n">PathQuery</span><span class="p">,</span> <span class="n">replace</span> <span class="n">the</span> <span class="n">constraint</span> <span class="n">code</span> <span class="n">of</span> <span class="n">each</span> <span class="n">constraint</span> <span class="n">with</span> <span class="n">its</span> <span class="n">equivalent</span> <span class="n">Cypher</span> <span class="n">constraint</span><span class="p">.</span>
	<span class="mf">3.</span> <span class="n">For</span> <span class="n">creating</span> <span class="n">the</span> <span class="n">RETURN</span> <span class="n">clause</span>
		<span class="mf">1.</span> <span class="n">For</span> <span class="n">each</span> <span class="n">view</span><span class="p">,</span> <span class="n">get</span> <span class="n">its</span> <span class="n">path</span>
		<span class="mf">2.</span> <span class="n">Get</span> <span class="n">the</span> <span class="n">variableName</span> <span class="n">of</span> <span class="n">the</span> <span class="n">last</span> <span class="n">TreeNode</span> <span class="n">of</span> <span class="n">the</span> <span class="n">path</span>
		<span class="mf">3.</span> <span class="n">Add</span> <span class="n">variableNames</span> <span class="n">separated</span> <span class="n">by</span> <span class="n">commas</span> <span class="k">for</span> <span class="n">each</span> <span class="n">such</span> <span class="n">variable</span>
	<span class="mf">4.</span> <span class="n">For</span> <span class="n">creating</span> <span class="n">ORDER</span> <span class="n">BY</span> <span class="n">clause</span><span class="p">,</span>
		<span class="mf">1.</span> <span class="n">For</span> <span class="n">each</span> <span class="n">Sort</span> <span class="n">Order</span><span class="p">,</span> <span class="n">get</span> <span class="n">its</span> <span class="n">path</span>
		<span class="mf">2.</span> <span class="n">Get</span> <span class="n">the</span> <span class="n">variableName</span> <span class="n">of</span> <span class="n">the</span> <span class="n">last</span> <span class="n">TreeNode</span> <span class="n">of</span> <span class="n">the</span> <span class="n">path</span>
		<span class="mf">3.</span> <span class="n">Add</span> <span class="n">variableName</span> <span class="n">ASC</span><span class="o">/</span><span class="n">DESC</span> <span class="n">separated</span> <span class="n">by</span> <span class="n">commas</span> <span class="k">for</span> <span class="n">each</span> <span class="n">such</span> <span class="n">variable</span>
	<span class="mf">5.</span> <span class="n">For</span> <span class="n">handling</span> <span class="n">JOIN</span> <span class="n">operations</span> <span class="n">in</span> <span class="n">the</span> <span class="n">PathQuery</span><span class="p">,</span>
		<span class="mf">1.</span> <span class="n">Add</span> <span class="n">OPTIONAL</span> <span class="n">MATCH</span> <span class="n">clause</span> <span class="n">in</span> <span class="n">the</span> <span class="n">query</span> <span class="k">for</span> <span class="n">corresponding</span> <span class="n">paths</span><span class="p">.</span>
<span class="mf">7.</span> <span class="n">Return</span> <span class="n">the</span> <span class="n">generated</span> <span class="n">query</span></code></pre></figure>

<p>The above approch is implemented in <a href="https://github.com/intermine/neo4j/blob/dev/intermine-neo4j/src/main/java/org/intermine/neo4j/cypher/QueryGenerator.java">QueryGenerator</a> class. After converting the Path Query given above, we will get the following Cypher query.</p>

<figure class="highlight"><pre><code class="language-cypher" data-lang="cypher"><span class="k">MATCH</span><span class="w"> </span><span class="p">(</span><span class="n">gene</span><span class="w"> </span><span class="p">:</span><span class="n">Gene</span><span class="p">),</span><span class="w"></span>
<span class="p">(</span><span class="n">gene</span><span class="p">)</span><span class="err">-</span><span class="o">[</span><span class="n">gene_chromosomelocation</span><span class="p">:</span><span class="n">LOCATED_ON</span><span class="o">]</span><span class="err">-</span><span class="p">()</span><span class="w"></span>
<span class="k">WHERE</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="p">(</span><span class="n">gene_chromosomelocation</span><span class="p">.</span><span class="k">start</span><span class="w"> </span><span class="p">&lt;=</span><span class="w"> </span><span class="m">14619002</span><span class="w"> </span><span class="n">AND</span><span class="w"> </span><span class="n">gene_chromosomelocation</span><span class="p">.</span><span class="n">end</span><span class="w"> </span><span class="p">&gt;=</span><span class="w"> </span><span class="m">14615435</span><span class="w"> </span><span class="n">AND</span><span class="w"> </span><span class="p">()</span><span class="err">-</span><span class="o">[</span><span class="n">gene_chromosomelocation</span><span class="o">]</span><span class="err">-</span><span class="p">(:</span><span class="n">Chromosome</span><span class="w"> </span><span class="p">{</span><span class="n">primaryIdentifier</span><span class="p">:</span><span class="err">&#39;</span><span class="m">2</span><span class="n">L</span><span class="err">&#39;</span><span class="p">}))</span><span class="w"></span>
<span class="k">RETURN</span><span class="w"> </span><span class="n">gene</span><span class="p">.</span><span class="n">primaryIdentifier</span><span class="w"></span>
<span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">gene</span><span class="p">.</span><span class="n">primaryIdentifier</span><span class="w"> </span><span class="k">ASC</span><span class="w"></span></code></pre></figure>

<h2 id="restful-api">RESTful API</h2>

<p><strong>Note</strong> - The REST API code is in <a href="https://github.com/intermine/neo4j/tree/dev/intermine-neo4jwebapp">intermine-neo4jwebapp</a> sub-project of the <a href="https://github.com/intermine/neo4j">intermine/neo4j</a> repository.</p>

<h3 id="intermine-neo4j-api">InterMine-Neo4j API</h3>

<p>The InterMine-Neo4j API is developed using <a href="https://jersey.github.io/">Jersey</a> and is documented using <a href="http://swagger.io/">Swagger</a>. The InterMine-Neo4j API can be explored via Swagger UI at <a href="http://intermine-neo4jwebapp.herokuapp.com">intermine-neo4jwebapp.herokuapp.com</a>. There are two major endpoints in the API so far,</p>

<ul>
  <li><strong>query/cypher</strong> - This returns the Cypher equivalent of any Path Query.</li>
  <li><strong>query/results</strong> - This endpoint returns the results of a Path Query by converting it into Cypher and running that Cypher against InterMine-Neo4j Graph.</li>
</ul>

<h3 id="api-response">API Response</h3>

<p>We have kept InterMine-Neo4j API JSON response exactly similar to the InterMine API response. This would ensure that the applications that consume existing InterMine API can work seamlessly with the new API. The API response is being created manually in <a href="https://github.com/intermine/neo4j/blob/dev/intermine-neo4jwebapp/src/main/java/org/intermine/neo4j/model/QueryResult.java">QueryResult</a> class.</p>

<h2 id="conclusion">Conclusion</h2>

<p>Contributing to InterMine this summer has been an amazing experience. It was my first time working on a project with a global team of experienced developers. I have got a chance to explore the latest technologies like Neo4j, Jersey, Gradle, Swagger etc.</p>

<p>I am grateful to my mentors Sam, Vivek and Daniela, for their guidance, direction and support throughout the summer. It is only because of their support and encouragement that I could complete this project. The entire InterMine community is welcoming and friendly. Overall it was a great learning experience!</p>


    </div>

    
<hr>

<aside id="comments" class="disqus">
  <div class="container">
    <h3><i class="icon icon-comments-o"></i> Comments</h3>
    <div id="disqus_thread"></div>
    <script>
      var disqus_config = function() {
        this.page.url = 'http://yasharmaster.github.io';
        this.page.identifier = '/blog/2017/gsoc-2017-final-report';
      };
      (function() {
        var d = document,
        s = d.createElement('script');
        s.src = '//www-yashsharma-tech.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</aside>

  </div>

</article>

      </div>

      <footer class="site-footer">
  <div class="container">
    <ul class="social">
  <li><a href="http://github.com/yasharmaster" target="_blank"><i class="icon icon-github"></i></a></li>
  <li><a href="http://twitter.com/yashsharma260" target="_blank"><i class="icon icon-twitter"></i></a></li>
  <li><a href="http://facebook.com/yasharma.95" target="_blank"><i class="icon icon-facebook"></i></a></li>
  <li><a href="http://linkedin.com/in/yash-sharma-317367b9" target="_blank"><i class="icon icon-linkedin"></i></a></li>
</ul>
    <p class="txt-medium-gray">
      <small>&copy;2017 Yash Sharma. All rights reserved. Made with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and ♥</small>
    </p>
  </div>
</footer>


      <a href="http://github.com/yasharmaster/yasharmaster.github.io" target="_blank" class="github-corner"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#337ab7; color:#fff; position: absolute; top: 0; border: 0; right: 0;"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

      <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
      <script>
      $(document).ready(function() {
        $('.sliding-panel-button,.sliding-panel-fade-screen,.sliding-panel-close').on('click touchstart',function (e) {
          $('.sliding-panel-content,.sliding-panel-fade-screen').toggleClass('is-visible');
          e.preventDefault();
        });
      });
      </script>
    </main>
  </body>
</html>
